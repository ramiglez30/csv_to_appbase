<!DOCTYPE html>
<html>

<head>
    <title>Probando CSV-Jquery</title>


    <link href="css/bootstrap.css" rel="stylesheet" />

    <link href="css/csv_importer.css" rel="stylesheet" />
    <script>
    Function.prototype.applyAsync = function(params, cb){
      var function_context = this;
      setTimeout(function(){
          var val = function_context.apply(this, params);
          if(cb) cb(val);
      }, 0);
    };
    </script>
</head>

<body>
    <div class="container">
        <h1>Loading CSV</h1>
        <div class="panel panel-default">
            <div class="panel-heading">
                <h2>Import file:</h2>
            </div>
            <div class="panel-body">

                <div>
                  <div class="row">
                    <div class="col-lg-6 col-md-6 col-sm-6 col-xs-12">
                      <input id="csv_file_input" type="file" accept=".csv" />
                    </div>
                    <div class="col-lg-6 col-md-6 col-sm-6 col-xs-12 text-right">
                        <a id="see_source_btn" class="btn btn-primary" role="button" data-toggle="collapse" href="#div_file_content" aria-expanded="false" aria-controls="div_file_content">See source file content &nbsp;<span class=" glyphicon glyphicon-chevron-down"></span></a>
                    </div>
                  </div>
                    <br />

                  <div id="div_file_content" class="collapse">
                        <textarea id="file_content" class="form-control" style="min-height:100px"></textarea>
                    </div>

<br>

                </div>


                <div class="panel panel-default">
                    <div class="panel-heading form-group">
                        <h3>Mapping</h3>
                        <label>Select FORM to send data:</label>
                        <select class="form-control form-control" id="form_names">
                           <option id="0">Select...</option>
                        </select>
                    </div>
                    <div id="table_container" class="panel-body">
                        <table id="table_mapping" class="table">
                            <thead>

                            </thead>
                            <tbody>

                            </tbody>

                        </table>
                       
                    </div>
                    <div style="margin:20px;">
                        <button id="send_data_btn" class="btn btn-primary" >Send Data to App Base</button>
                    </div>
                     
                </div>
            </div>

        </div>
    </div>

    <script src="js/jquery-1.12.4.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script src="js/csv_loader.js"></script>
    <script src="js/papaparse.min.js"></script>
    <script src="js/mocks.js"></script>
    <script src="js/appBaseService.js"></script>

    <script>
        $('#see_source_btn').on('click', function() {
            if(!$('#div_file_content').hasClass('in')) {
              $(this).children('span').removeClass('glyphicon-chevron-down');
              $(this).children('span').addClass('glyphicon-chevron-up');
            }else{
              $(this).children('span').removeClass('glyphicon-chevron-up');
              $(this).children('span').addClass('glyphicon-chevron-down');
            }
        } );
        
        $('#send_data_btn').on();
    </script>

    <script src="js/mocks.js"></script>

    <script src="js/test/appBaseServiceTest.js"></script>
    <script src="js/csv_importer.js"></script>
</body>

</html>
